<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 设置为BusinessDao接口方法提供sql语句配置 -->
<mapper namespace="com.onlineShopping.dao.BusinessDao">

    <!-- 检测商家管理员用户名是否重复 -->
    <select id="isShopAdminNameDuplicate" parameterType="java.lang.String" resultType="java.lang.Integer">
        SELECT COUNT(shopAdminName)
        FROM shop
        WHERE shopAdminName = #{shopAdminName}
    </select>

    <!-- 商家注册 -->
    <insert id="shopRegister" parameterType="com.onlineShopping.model.Business">
        INSERT INTO shop(
          shopName,
          shopAdminName,
          shopAdminPassword,
          shopBalance,
          shopRegisterTime
        )VALUES(
          #{shopName},
          #{shopAdminName},
          #{shopAdminPassword},
          '0',
          #{shopRegisterTime}
        )
    </insert>

    <!-- 商家管理员登录 -->
    <select id="shopAdminLogin" parameterType="java.lang.String" resultType="java.util.Map">
        SELECT
          shopId,
          shopName,
          shopBalance
        FROM shop
        WHERE shopAdminName = #{shopAdminName}
        AND shopAdminPassword = #{shopAdminPassword}
    </select>

    <!-- 商家上传头像 -->
    <update id="uploadShopProfile" parameterType="java.lang.String">
        UPDATE shop
        SET shopAdminProfile = #{shopAdminProfile}
        WHERE shopId = #{shopId}
    </update>
</mapper>